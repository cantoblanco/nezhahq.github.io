---
outline: deep
---

# 任务管理

**任务管理区域支持设置计划任务、触发任务以及多服务器批量执行任务**。  
哪吒监控允许推送命令到 Agent 执行，支持多种场景，包括且不仅限于：
- 定期使用 `restic`、`rclone` 备份服务器数据。
- 定期重启服务以重置网络连接。
- 配合通知规则触发任务，例如在 CPU 长时间高占用时运行某个脚本。

---

## 使用方法

### 添加任务

1. **进入任务页面**  
   在管理面板中进入 **`任务`** 页，点击 **`+`** 按钮新增任务。

2. **填写任务参数**  
   添加任务时需要配置以下参数：
   - **名称**：为任务自定义一个名称，便于管理和识别。
   - **任务类型**：
     - **计划任务**：按设置的计划时间周期性执行任务。
     - **触发任务**：任务仅通过 API 或通知规则触发，每次触发执行一次。
   - **计划**：任务执行的时间计划（仅计划任务生效），格式为：`秒 分 时 天 月 星期`。  
     详情参考 [计划表达式格式](https://pkg.go.dev/github.com/robfig/cron/v3#hdr-CRON_Expression_Format)。  
     示例：`0 0 3 * * *` 表示每天凌晨 3 点执行。
   - **命令**：需要执行的命令。  
     - 命令格式与 Shell/Bat 脚本相同，多个命令可用 `&&`（Linux）或 `&`（Windows）连接。
     - 示例：重启服务器输入 `reboot`。
   - **覆盖范围** 和 **特定服务器**：指定哪些 Agent 执行任务：
     - 可选择规则覆盖范围或特定服务器。
     - 对于触发任务，可选择“在触发通知的服务器上执行”。
   - **通知方式组**：选择已在 **`通知`** 页配置的通知方式，详见 [通知方式配置](/guide/notifications.html#灵活的通知方式)。

3. **提交任务**  
   填写完成后，点击 **`提交`** 保存任务。

---

## 管理任务

如需管理已有任务：
1. 前往 **`任务`** 页，找到目标任务。
2. 使用右侧的功能图标：
   - **立即执行**：忽略计划时间，立即执行任务。
   - **编辑**：修改任务配置。
   - **删除**：移除该任务。

---

## 常见问题

### 1. **xxx 命令找不到**
- 运行失败提示 “xxx 命令找不到”，通常是因为 PATH 环境变量未正确加载。
- 解决方法：
  - 在 Linux 中，可在命令前加 `source ~/.bashrc`：
    ```bash
    source ~/.bashrc && your_command
    ```
  - 或直接使用绝对路径执行命令（例如 `/usr/bin/command`）。


